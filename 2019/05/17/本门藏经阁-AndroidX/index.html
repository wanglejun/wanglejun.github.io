<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="本门藏经阁-AndroidX"><meta name="keywords" content="Android/Jetpack"><meta name="author" content="wanglejun"><meta name="copyright" content="wanglejun"><title>本门藏经阁-AndroidX | 七彩祥云至尊宝</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?60c057918ffffc2da6537ed82f0f4694";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="切换文章详情">切换站点概览</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#本门藏经阁-AndroidX"><span class="toc-number">1.</span> <span class="toc-text">本门藏经阁 - AndroidX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#藏经阁中都有什么-XX"><span class="toc-number">2.</span> <span class="toc-text">藏经阁中都有什么 XX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AndroidX-解决了什么问题"><span class="toc-number">3.</span> <span class="toc-text">AndroidX 解决了什么问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AndroidX-如何使用"><span class="toc-number">4.</span> <span class="toc-text">AndroidX 如何使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#准备工作"><span class="toc-number">4.1.</span> <span class="toc-text">准备工作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#一键迁移"><span class="toc-number">4.2.</span> <span class="toc-text">一键迁移</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#写在最后"><span class="toc-number">5.</span> <span class="toc-text">写在最后</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://s2.ax1x.com/2019/03/22/A3LH3j.jpg"></div><div class="author-info__name text-center">wanglejun</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">5</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">4</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://s2.ax1x.com/2019/04/29/E3d0je.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">七彩祥云至尊宝</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">首页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a></span></div><div id="post-info"><div id="post-title">本门藏经阁-AndroidX</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-05-17</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><blockquote>
<p>自盘谷开天辟地后，上古大神 Andy Rubin 开宗立派创立 Android 门，历经数十载，宗门日渐壮大，门下弟子遍布整个九州大陆。坊间流传，其门下弟子最善以身着格子衬衣，牛仔裤，背黑色双肩包装扮行走江湖，那其中的头顶光滑锃亮者更是其中的佼佼强者，修为绝顶。</p>
</blockquote>
<h3 id="本门藏经阁-AndroidX"><a href="#本门藏经阁-AndroidX" class="headerlink" title="本门藏经阁 - AndroidX"></a>本门藏经阁 - AndroidX</h3><p>藏经阁，历来为各大门派收藏本门绝学之所在。<br>本门亦不例外，这 AndroidX 中尽数收录了宗门无上武功心法秘笈，其中多数源自宗门上古宝典支持库(<a href="https://developer.android.com/topic/libraries/support-library/" target="_blank" rel="noopener"> Support Library Packages </a>)，经过历代宗主不断参悟，优化改进，现已形成一套完整修炼体系，为门下弟子修行所用。后世若是有门人参透更高武学，亦将收录于此，造福后世弟子。</p>
 <a id="more"></a>
<p>好吧，接下来我要好好说话了，编不下去了……</p>
<p><img src="https://s2.ax1x.com/2019/05/17/ELKL8S.jpg" width="200" height="200"></p>
<p><strong>来自官方的解释</strong></p>
<blockquote>
<p> AndroidX 是对原始 Android Support 库(<a href="https://developer.android.com/topic/libraries/support-library/" target="_blank" rel="noopener"> Support Library Packages </a>)的重大改进。是 Android 团队用于在 Jetpack 中开发，测试，打包，发布和发布库的开源项目 。</p>
</blockquote>
<p>PS：<a href="https://developer.android.com/topic/libraries/support-library/" target="_blank" rel="noopener"> <strong>Support 库</strong> </a>如果刚入门的同学不知为何物的话这边简单介绍一下。<br> Support 库和 Android 操作系统是分开提供的，Support 库提供了一系列的没有内置在 Android 框架内的功能，包括向后兼容版本的新功能，框架中未包含的实用 UI 元素等如V4（<code>android.support.v4</code>），V7（<code>android.support.v7</code>）包。</p>
<p>看到这里是不是还是觉得一头雾水，AndroidX 到底是什么 XX 啊。别急，下面会展开细说。看完相信众位师兄弟们定能修为有所精进，距离绝顶境界又进一步.</p>
<h3 id="藏经阁中都有什么-XX"><a href="#藏经阁中都有什么-XX" class="headerlink" title="藏经阁中都有什么 XX"></a>藏经阁中都有什么 XX</h3><p>AndroidX 中的所有软件包都以字符串 <code>androidx</code> 开头。原始 Support 库包也已映射到相应的 <code>androidx.*</code> 包中。<br>如原始 Support 库中的 <code>com.android.support:appcompat-v7</code> 包映射到 AndroidX 中为 <code>androidx.appcompat:appcompat:1.0.0</code> 。包名变成以 <code>androidx</code> 开头。<br>下表仅列部分原始支持库迁移到 AndroidX 到映射表，大概了解一下就可以了，只要知道之前使用到支持库中的库 AndroidX 都支持，如何使用下面会具体介绍，感兴趣的同学可以去官网查看完整<a href="https://developer.android.com/jetpack/androidx/migrate" target="_blank" rel="noopener">映射表</a></p>
<table>
<thead>
<tr>
<th style="text-align:center">原始 Support 库</th>
<th style="text-align:center">AndroidX</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">com.android.support:support-compat</td>
<td style="text-align:center">androidx.core:core:1.0.0+</td>
</tr>
<tr>
<td style="text-align:center">com.android.support:appcompat-v7</td>
<td style="text-align:center">androidx.appcompat:appcompat:1.0.0+</td>
</tr>
<tr>
<td style="text-align:center">com.android.support:design</td>
<td style="text-align:center">com.google.android.material:material:1.0.0+</td>
</tr>
<tr>
<td style="text-align:center">com.android.support:multidex</td>
<td style="text-align:center">androidx.multidex:multidex:2.0.0+</td>
</tr>
<tr>
<td style="text-align:center">com.android.support.test.espresso:espresso-accessibility</td>
<td style="text-align:center">androidx.test.espresso:espresso-accessibility:3.1.0</td>
</tr>
<tr>
<td style="text-align:center">com.android.support.test:runner</td>
<td style="text-align:center">androidx.test:runner:1.1.0</td>
</tr>
<tr>
<td style="text-align:center">com.android.support:cardview-v7</td>
<td style="text-align:center">androidx.cardview:cardview:1.0.0</td>
</tr>
<tr>
<td style="text-align:center">com.android.support:recyclerview-v7</td>
<td style="text-align:center">androidx.recyclerview:recyclerview:1.0.0</td>
</tr>
<tr>
<td style="text-align:center">com.android.support:viewpager</td>
<td style="text-align:center">androidx.viewpager:viewpager:1.0.0</td>
</tr>
<tr>
<td style="text-align:center">android.arch.lifecycle:livedata</td>
<td style="text-align:center">androidx.lifecycle:lifecycle-livedata:2.0.0-rc01</td>
</tr>
<tr>
<td style="text-align:center">com.android.support:support-fragment</td>
<td style="text-align:center">androidx.fragment:fragment:1.0.0+</td>
</tr>
</tbody>
</table>
<p>除了对原始 Support 库的映射和改进，后续新的 Support 库的开发都将在 AndroidX 库中进行，包括原始 Support 库都维护和新引入的 Jetpack 组件。AndroidX 库中的包大致可以分为以下三大类：</p>
<ol>
<li><p>测试组件</p>
<blockquote>
<p>包含 AndroidX 中所有测试相关组件，如果你是个爱写单元测试的宝宝，那在原始 Support 库时代就一定用过相关的测试组件，没用过的也没关系，以后的项目中如果需要覆盖单元测试甚至自动化测试，就一定会用到测试相关的组件。<br> AndroidX 中所有测试相关的组件都在 <code>androidx.test.*</code> 包下，如：<br><code>androidx.test.runner</code>,<code>androidx.test.espresso</code></p>
</blockquote>
</li>
<li><p>架构组件</p>
<blockquote>
<p> 即 Jetpack 相关组件。</p>
</blockquote>
</li>
<li>其他 AndroidX 组件</li>
</ol>
<h3 id="AndroidX-解决了什么问题"><a href="#AndroidX-解决了什么问题" class="headerlink" title="AndroidX 解决了什么问题"></a>AndroidX 解决了什么问题</h3><p>前面说到 AndroidX 是对原始 Support 库重大改进。那么谷歌爸爸为什么在已经有了迭代了很多版本的 Support 库的情况下又整出一个新的 AndroidX 呢？<br>直白一点来说就是现有的 Support 库越来越难用了：</p>
<ol>
<li>随着版本的迭代，需要做更多的兼容，Support 库包的体积越来越臃肿，版本维护成本越来越高。</li>
<li>库的功能不单一，每个库均是针对特定范围的 Android 平台和功能，如使用  <code>android.support.v7.*</code> 包，可能你的App只会用到其中的几个库，但是你需要将整个 V7 包都引入，这势必会增加你的 App 体积和方法数等。</li>
<li>基于第二点原因带来的更新体验更加难受，如果 Support 库中更新了某个功能的新特性或修复了 bug 需要升级，又或是你的 targetsdk 需要变更，你的所有 <code>android.supprot.*</code> 相关的依赖全部都需要更新，牵一发动全身这无疑是开发总最让人脑阔疼的事了。</li>
</ol>
<p>那么 AndroidX 是如何解决以上问题的呢？</p>
<p>AndroidX 中的所有组件都是单独维护和更新的。这样做的好处就是所有组件功能更加单一，职责分明，更加易于维护和更新。我们在使用时仅需引入我们需要的组件，而且当某个组件发布新的特性或者修复 bug，只需更新对应的组件即可，其他组件不受影响。</p>
<h3 id="AndroidX-如何使用"><a href="#AndroidX-如何使用" class="headerlink" title="AndroidX 如何使用"></a>AndroidX 如何使用</h3><p>目前 Android 28.0.0稳定版使用的还是 <code>android.support.*</code> ,创建新的项目默认使用的还是 Support 库。所以想体验 AndroidX 的同学可以尝试将自己的项目迁移至 AndroidX 。</p>
<blockquote>
<p>PS:最新的 Support 库版本是28.0.0稳定版（2018年9月21日更新），这将是 Support 更新的最后一个版本，这也是谷歌爸爸预留给开发者们迁移到 AndroidX 的时间，后续所有更新都将在 AndroidX 中进行。</p>
</blockquote>
<p><a href="https://developer.android.google.cn/topic/libraries/support-library/revisions#28-0-0-alpha1" target="_blank" rel="noopener">来自官方的说明:</a></p>
<blockquote>
<p>This is the stable release of Support Library 28.0.0 and is suitable for use in production. This will be the last feature release under the android.support packaging, and developers are encouraged to migrate to AndroidX.</p>
</blockquote>
<p>OK,既然官方推荐而且 Support 库也不再更新了，没啥好说的了，盘它！</p>
<h4 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h4><p><strong>1. Android Studio 升级到3.2.0 Canary 14以上版本</strong></p>
<p> <img src="https://s2.ax1x.com/2019/05/17/ELKXvQ.png" width="500" height="300"></p>
<p><strong>2. gradle 版本升到3.2.0以上</strong><br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">classpath</span> <span class="string">'com.android.tools.build:gradle:3.2.1'</span></span><br></pre></td></tr></table></figure></p>
<p><strong>3. compileSdkVersion 升到28以上</strong></p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">compileSdkVersion <span class="number">28</span></span><br><span class="line">defaultConfig &#123;</span><br><span class="line">     targetSdkVersion <span class="number">28</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p><strong>4. gradle.properties 文件配置</strong><br>如果你是在一个新的项目中需要使用 AndroidX ，<code>.gradle.properties</code> 文件中这样配置：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">android.enableJetifier=<span class="keyword">true</span></span><br><span class="line">android.useAndroidX=<span class="keyword">true</span></span><br></pre></td></tr></table></figure>
<p>如果你想在一个现有的项目中体验 AndroidX ，但是之前使用的库不迁移的话， <code>.gradle.properties</code> 文件中这样配置：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">android.enableJetifier=<span class="keyword">false</span></span><br><span class="line">android.useAndroidX=<span class="keyword">true</span></span><br></pre></td></tr></table></figure>
<h4 id="一键迁移"><a href="#一键迁移" class="headerlink" title="一键迁移"></a>一键迁移</h4><p>Android Studio 3.2.0 Canary 14及以上版本提供了方便快捷的一键迁移到 AndroidX 的功能。在菜单上选择 <strong>Refactor-&gt;Migrate to AndroidX</strong> 即可完成迁移。</p>
<p> <img src="https://s2.ax1x.com/2019/05/17/ELKvuj.png"></p>
<p><strong>注意:</strong><br>如果准备工作第三点中你的 <code>compileSdkVersion</code> 没有升到28及以上点击 “Migrate to AndroidX” 会提示：</p>
<p> <img src="https://s2.ax1x.com/2019/05/17/ELKOgg.png"></p>
<h3 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h3><p>关于 AndroidX 的来龙去脉以及如何使用就介绍到这里啦！最后再总结一下：<br> 原始 Support 库谷歌爸爸最终只更新到28.0.0版本，后续将不再更新，所有的新功能开发都将在 AndroidX 中进行。仅凭这一点我们就需要赶紧学起来了，虽然技术的更迭节奏让我们眼花缭乱，明明刚出的还没学完又出新花样，但正是技术的不断更迭才带来技术的不断进步，我们在学习新技术的同时也是让自己变得更好的过程，从我们踏进这个门，选择这条路的时候开始，就已经做好了终身学习的准备了。世界在变，我们需要做的就是享受变化，拥抱变化！（猝不及防来了一波鸡汤）。</p>
<p>电光火石间，宗门重地藏经阁金顶三道天雷降下，将这夜映的如白昼一般，顿时间狂风扫落叶，乌云压金顶！突然，一道金光夺窗而出，直奔天雷御剑而去。得见此景弟子的们都在大喊“快看！快看！藏经阁飞出一个头顶冒金光的人，往天雷飞去了”。而此时站在山顶的宗主则微微一笑，他知道这是门下又一弟子习得藏经阁中上乘功法至绝顶境界了，那一头的金光正是绝顶境界！</p>
</div></article><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Android-Jetpack/">Android/Jetpack</a></div><nav id="pagination"><div class="next-post pull-right"><a href="/2019/04/29/Jetpack之Navigation初探/"><span>Jetpack 之 Navigation 初探</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(https://s2.ax1x.com/2019/04/29/E3d0je.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2019 By wanglejun</div><div class="framework-info"><span>驱动 - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script></body></html>